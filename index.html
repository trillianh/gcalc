<!DOCTYPE html>
<style>
body{
	font-family: sans-serif;
	text-rendering: optimizeLegibility
}
h1{
	background-color: #7289da;
}
.tinput{
	width: 40px;
}
</style>
<meta charset="utf-8">
<html>
<body onkeyup="refresh()" onkeydown="refresh()" onclick="refresh()" onload="firstload()">
	<header class="h1">tier calc</header>
	<script type="text/javascript">
		var bigDrop = 100000000;
		var neidan = 100000;
		var candidum = 409200;
		var goldmont = 100000;
		var hekaru = 82000;
		var nineshark = 53700;
		var blackrust = 52400;
		var stalker = 42800;
		var guildFund = 29000000000;
		//var earnings = JSON.parse();
		var numEaTier = [0,0,0,0,0,0,0,0,0,0];
		var tiers;
		var pay;
		function firstload(){
			document.getElementById("funds").value = 29000000000;
			document.getElementById("t1s").value = 10;
			for(i=2;i<11;i++){
				document.getElementById("t"+i+"s").value = 0;
			}
			refresh();
		}
		function getDataFromTable(){
			i = 1;
			while(i<11){
				try{
					numEaTier[i-1] = document.getElementById("t"+i+"s").value;
				
				}
				catch(err){
					numEaTier[i-1]=0;
				}
				i++;
			}
		}
		function refresh(){
			guildFund = document.getElementById("funds").value;
			document.getElementById("bonus").innerHTML = "Total Bonus: "+Math.round(guildFund*0.4).toLocaleString();
			getDataFromTable();
			var tier1pay = calcpay();
			var i = 1;
			var memberc = 0;
			while(i<11){
				memberc += parseInt(numEaTier[i-1]);
				currentpay = tier1pay * i;
				document.getElementById("tp"+i).innerHTML = "pay: "+Math.round(currentpay).toLocaleString();

				i++;
			}

			document.getElementById("membercount").innerHTML = "Members: "+memberc;

		}
		function calcpay(){
			var total = guildFund * 0.4;
			/*var numEaTier = [0,0,0,0,0,0,0,0,0,0];
			for (var family in tiers){
				numEaTier[tiers[family]]++;
			}*/
			var t1pay = 0;
			var i = 1;
			while(i<11){
				t1pay += i*numEaTier[i-1];
				i++;
			}
			t1pay = total/t1pay;
			/*for (var family in pay){
				pay[family] = t1pay * tiers[family];
			}*/
			return t1pay;
		}
		/*
		function calctiers(){
			var largest = 0;
			for (var family in earnings){
				if(largest<earnings[family]){
					largest = earnings[family];
				}
			}

		}*/
	</script>
	<p>Guild Funds:<input type="number" id="funds"></p>
	<p id="bonus">Total Bonus:</p>
	<p id="membercount">Members:</p>
	<br>
	<table style="border-spacing: 0;">
			<tr><td>T1's:</td><td> <input type="number" id="t1s" class="tinput"></td><td id="tp1"></td></tr>
			<tr><td>T2's:</td><td> <input type="number" id="t2s" class="tinput"></td><td id="tp2"></td></tr>
			<tr><td>T3's:</td><td> <input type="number" id="t3s" class="tinput"></td><td id="tp3"></td></tr>
			<tr><td>T4's:</td><td> <input type="number" id="t4s" class="tinput"></td><td id="tp4"></td></tr>
			<tr><td>T5's:</td><td> <input type="number" id="t5s" class="tinput"></td><td id="tp5"></td></tr>
			<tr><td>T6's:</td><td> <input type="number" id="t6s" class="tinput"></td><td id="tp6"></td></tr>
			<tr><td>T7's:</td><td> <input type="number" id="t7s" class="tinput"></td><td id="tp7"></td></tr>
			<tr><td>T8's:</td><td> <input type="number" id="t8s" class="tinput"></td><td id="tp8"></td></tr>
			<tr><td>T9's:</td><td> <input type="number" id="t9s" class="tinput"></td><td id="tp9"></td></tr>
			<tr><td>T10's:</td><td> <input type="number" id="t10s" class="tinput"></td><td id="tp10"></td></tr>
	</table>
	<br>
</body>
</html>